#macro kc_a                                         keyboard_check(ord("A"))
#macro kc_s                                         keyboard_check(ord("S"))
#macro kc_d                                         keyboard_check(ord("D"))
#macro kc_f                                         keyboard_check(ord("F"))
#macro kc_g                                         keyboard_check(ord("G"))
#macro kc_h                                         keyboard_check(ord("H"))
#macro kc_j                                         keyboard_check(ord("J"))
#macro kc_k                                         keyboard_check(ord("K"))
#macro kc_l                                         keyboard_check(ord("L"))
#macro kc_q                                         keyboard_check(ord("Q"))
#macro kc_w                                         keyboard_check(ord("W"))
#macro kc_e                                         keyboard_check(ord("E"))
#macro kc_r                                         keyboard_check(ord("R"))
#macro kc_t                                         keyboard_check(ord("T"))
#macro kc_y                                         keyboard_check(ord("Y"))
#macro kc_u                                         keyboard_check(ord("U"))
#macro kc_i                                         keyboard_check(ord("I"))
#macro kc_o                                         keyboard_check(ord("O"))
#macro kc_p                                         keyboard_check(ord("P"))
#macro kc_z                                         keyboard_check(ord("Z"))
#macro kc_x                                         keyboard_check(ord("X"))
#macro kc_c                                         keyboard_check(ord("C"))
#macro kc_v                                         keyboard_check(ord("V"))
#macro kc_b                                         keyboard_check(ord("B"))
#macro kc_n                                         keyboard_check(ord("N"))
#macro kc_m                                         keyboard_check(ord("M"))
#macro kc_up                                        keyboard_check(vk_up)
#macro kc_left                                      keyboard_check(vk_left)
#macro kc_right                                     keyboard_check(vk_right)
#macro kc_down                                      keyboard_check(vk_down)
#macro kc_backspace                                 keyboard_check(vk_backspace)
#macro kc_escape                                    keyboard_check(vk_escape)
#macro kc_control                                   keyboard_check(vk_control)
#macro kc_shift                                     keyboard_check(vk_shift)
#macro kc_alt                                       keyboard_check(vk_alt)
#macro kc_space                                     keyboard_check(vk_space)
#macro kc_enter                                     keyboard_check(vk_enter)
#macro kc_anykey                                    keyboard_check(vk_anykey)
#macro kc_delete                                    keyboard_check(vk_delete)
#macro kc_tab                                       keyboard_check(vk_tab)
#macro kc_f1                                        keyboard_check(vk_f1)
#macro kc_f2                                        keyboard_check(vk_f2)
#macro kc_f3                                        keyboard_check(vk_f3)
#macro kc_f4                                        keyboard_check(vk_f4)
#macro kc_f5                                        keyboard_check(vk_f5)
#macro kc_f6                                        keyboard_check(vk_f6)
#macro kc_f7                                        keyboard_check(vk_f7)
#macro kc_f8                                        keyboard_check(vk_f8)
#macro kc_f9                                        keyboard_check(vk_f9)
#macro kc_f10                                       keyboard_check(vk_f10)
#macro kc_f11                                       keyboard_check(vk_f11)
#macro kc_f12                                       keyboard_check(vk_f12)
#macro kc_1                                         keyboard_check(vk_1)
#macro kc_2                                         keyboard_check(vk_2)
#macro kc_3                                         keyboard_check(vk_3)
#macro kc_4                                         keyboard_check(vk_4)
#macro kc_5                                         keyboard_check(vk_5)
#macro kc_6                                         keyboard_check(vk_6)
#macro kc_7                                         keyboard_check(vk_7)
#macro kc_8                                         keyboard_check(vk_8)
#macro kc_9                                         keyboard_check(vk_9)
#macro kc_0                                         keyboard_check(vk_0)
#macro kp_a                                         keyboard_check_pressed(ord("A"))
#macro kp_s                                         keyboard_check_pressed(ord("S"))
#macro kp_d                                         keyboard_check_pressed(ord("D"))
#macro kp_f                                         keyboard_check_pressed(ord("F"))
#macro kp_g                                         keyboard_check_pressed(ord("G"))
#macro kp_h                                         keyboard_check_pressed(ord("H"))
#macro kp_j                                         keyboard_check_pressed(ord("J"))
#macro kp_k                                         keyboard_check_pressed(ord("K"))
#macro kp_l                                         keyboard_check_pressed(ord("L"))
#macro kp_q                                         keyboard_check_pressed(ord("Q"))
#macro kp_w                                         keyboard_check_pressed(ord("W"))
#macro kp_e                                         keyboard_check_pressed(ord("E"))
#macro kp_r                                         keyboard_check_pressed(ord("R"))
#macro kp_t                                         keyboard_check_pressed(ord("T"))
#macro kp_y                                         keyboard_check_pressed(ord("Y"))
#macro kp_u                                         keyboard_check_pressed(ord("U"))
#macro kp_i                                         keyboard_check_pressed(ord("I"))
#macro kp_o                                         keyboard_check_pressed(ord("O"))
#macro kp_p                                         keyboard_check_pressed(ord("P"))
#macro kp_z                                         keyboard_check_pressed(ord("Z"))
#macro kp_x                                         keyboard_check_pressed(ord("X"))
#macro kp_c                                         keyboard_check_pressed(ord("C"))
#macro kp_v                                         keyboard_check_pressed(ord("V"))
#macro kp_b                                         keyboard_check_pressed(ord("B"))
#macro kp_n                                         keyboard_check_pressed(ord("N"))
#macro kp_m                                         keyboard_check_pressed(ord("M"))
#macro kp_up                                        keyboard_check_pressed(vk_up)
#macro kp_left                                      keyboard_check_pressed(vk_left)
#macro kp_right                                     keyboard_check_pressed(vk_right)
#macro kp_down                                      keyboard_check_pressed(vk_down)
#macro kp_backspace                                 keyboard_check_pressed(vk_backspace)
#macro kp_escape                                    keyboard_check_pressed(vk_escape)
#macro kp_control                                   keyboard_check_pressed(vk_control)
#macro kp_tab                                       keyboard_check_pressed(vk_tab)
#macro kp_shift                                     keyboard_check_pressed(vk_shift)
#macro kp_alt                                       keyboard_check_pressed(vk_alt)
#macro kp_space                                     keyboard_check_pressed(vk_space)
#macro kp_enter                                     keyboard_check_pressed(vk_enter)
#macro kp_anykey                                    keyboard_check_pressed(vk_anykey)
#macro kp_delete                                    keyboard_check_pressed(vk_delete)
#macro kp_f1                                        keyboard_check_pressed(vk_f1)
#macro kp_f2                                        keyboard_check_pressed(vk_f2)
#macro kp_f3                                        keyboard_check_pressed(vk_f3)
#macro kp_f4                                        keyboard_check_pressed(vk_f4)
#macro kp_f5                                        keyboard_check_pressed(vk_f5)
#macro kp_f6                                        keyboard_check_pressed(vk_f6)
#macro kp_f7                                        keyboard_check_pressed(vk_f7)
#macro kp_f8                                        keyboard_check_pressed(vk_f8)
#macro kp_f9                                        keyboard_check_pressed(vk_f9)
#macro kp_f10                                       keyboard_check_pressed(vk_f10)
#macro kp_f11                                       keyboard_check_pressed(vk_f11)
#macro kp_f12                                       keyboard_check_pressed(vk_f12)
#macro kp_1                                         keyboard_check_pressed(vk_1)
#macro kp_2                                         keyboard_check_pressed(vk_2)
#macro kp_3                                         keyboard_check_pressed(vk_3)
#macro kp_4                                         keyboard_check_pressed(vk_4)
#macro kp_5                                         keyboard_check_pressed(vk_5)
#macro kp_6                                         keyboard_check_pressed(vk_6)
#macro kp_7                                         keyboard_check_pressed(vk_7)
#macro kp_8                                         keyboard_check_pressed(vk_8)
#macro kp_9                                         keyboard_check_pressed(vk_9)
#macro kp_0                                         keyboard_check_pressed(vk_0)
#macro kr_a                                         keyboard_check_released(ord("A"))
#macro kr_s                                         keyboard_check_released(ord("S"))
#macro kr_d                                         keyboard_check_released(ord("D"))
#macro kr_f                                         keyboard_check_released(ord("F"))
#macro kr_g                                         keyboard_check_released(ord("G"))
#macro kr_h                                         keyboard_check_released(ord("H"))
#macro kr_j                                         keyboard_check_released(ord("J"))
#macro kr_k                                         keyboard_check_released(ord("K"))
#macro kr_l                                         keyboard_check_released(ord("L"))
#macro kr_q                                         keyboard_check_released(ord("Q"))
#macro kr_w                                         keyboard_check_released(ord("W"))
#macro kr_e                                         keyboard_check_released(ord("E"))
#macro kr_r                                         keyboard_check_released(ord("R"))
#macro kr_t                                         keyboard_check_released(ord("T"))
#macro kr_y                                         keyboard_check_released(ord("Y"))
#macro kr_u                                         keyboard_check_released(ord("U"))
#macro kr_i                                         keyboard_check_released(ord("I"))
#macro kr_o                                         keyboard_check_released(ord("O"))
#macro kr_p                                         keyboard_check_released(ord("P"))
#macro kr_z                                         keyboard_check_released(ord("Z"))
#macro kr_x                                         keyboard_check_released(ord("X"))
#macro kr_c                                         keyboard_check_released(ord("C"))
#macro kr_v                                         keyboard_check_released(ord("V"))
#macro kr_b                                         keyboard_check_released(ord("B"))
#macro kr_n                                         keyboard_check_released(ord("N"))
#macro kr_m                                         keyboard_check_released(ord("M"))
#macro kr_up                                        keyboard_check_released(vk_up)
#macro kr_left                                      keyboard_check_released(vk_left)
#macro kr_right                                     keyboard_check_released(vk_right)
#macro kr_down                                      keyboard_check_released(vk_down)
#macro kr_backspace                                 keyboard_check_released(vk_backspace)
#macro kr_escape                                    keyboard_check_released(vk_escape)
#macro kr_control                                   keyboard_check_released(vk_control)
#macro kr_tab                                       keyboard_check_released(vk_tab)
#macro kr_shift                                     keyboard_check_released(vk_shift)
#macro kr_alt                                       keyboard_check_released(vk_alt)
#macro kr_space                                     keyboard_check_released(vk_space)
#macro kr_enter                                     keyboard_check_released(vk_enter)
#macro kr_anykey                                    keyboard_check_released(vk_anykey)
#macro kr_delete                                    keyboard_check_released(vk_delete)
#macro kr_f1                                        keyboard_check_released(vk_f1)
#macro kr_f2                                        keyboard_check_released(vk_f2)
#macro kr_f3                                        keyboard_check_released(vk_f3)
#macro kr_f4                                        keyboard_check_released(vk_f4)
#macro kr_f5                                        keyboard_check_released(vk_f5)
#macro kr_f6                                        keyboard_check_released(vk_f6)
#macro kr_f7                                        keyboard_check_released(vk_f7)
#macro kr_f8                                        keyboard_check_released(vk_f8)
#macro kr_f9                                        keyboard_check_released(vk_f9)
#macro kr_f10                                       keyboard_check_released(vk_f10)
#macro kr_f11                                       keyboard_check_released(vk_f11)
#macro kr_f12                                       keyboard_check_released(vk_f12)
#macro kr_1                                         keyboard_check_released(vk_1)
#macro kr_2                                         keyboard_check_released(vk_2)
#macro kr_3                                         keyboard_check_released(vk_3)
#macro kr_4                                         keyboard_check_released(vk_4)
#macro kr_5                                         keyboard_check_released(vk_5)
#macro kr_6                                         keyboard_check_released(vk_6)
#macro kr_7                                         keyboard_check_released(vk_7)
#macro kr_8                                         keyboard_check_released(vk_8)
#macro kr_9                                         keyboard_check_released(vk_9)
#macro kr_0                                         keyboard_check_released(vk_0)
#macro mp_left                                      mouse_check_button_pressed(mb_left)
#macro mc_left                                      mouse_check_button(mb_left)
#macro mr_left                                      mouse_check_button_released(mb_left)
#macro mp_left1                                     device_mouse_check_button_pressed(0,mb_left)
#macro mc_left1                                     device_mouse_check_button(0,mb_left)
#macro mr_left1                                     device_mouse_check_button_released(0,mb_left)
#macro mp_right                                     mouse_check_button_pressed(mb_right)
#macro mc_right                                     mouse_check_button(mb_right)
#macro mr_right                                     mouse_check_button_released(mb_right)
#macro mp_right1                                    device_mouse_check_button_pressed(0,mb_right)
#macro mc_right1                                    device_mouse_check_button(0,mb_right)
#macro mr_right1                                    device_mouse_check_button_released(0,mb_right)

#macro mw_up                                        mouse_wheel_up()
#macro mw_down                                      mouse_wheel_down()
#macro mw_dir                                       (mouse_wheel_down()-mouse_wheel_up())


#macro inpHorizontal                                (KC.right+GC1.right-KC.left-GC1.left)
#macro inpVertical                                  (KC.down+GC1.down-KC.up-GC1.up)

#macro gpA                                          gp_face1
#macro gpB                                          gp_face2
#macro gpY                                          gp_face3
#macro gpX                                          gp_face4
#macro gpConfirm                                    gpA
#macro gpCancel                                     gpB
#macro gpAction1                                    gpX
#macro gpAction2                                    gpB
#macro gpAction3                                    gpY
#macro gpLB                                         gp_shoulderl
#macro gpRB                                         gp_shoulderr
#macro gpLT                                         gp_shoulderlb
#macro gpRT                                         gp_shoulderrb
#macro gpSelect                                     gp_select
#macro gpStart                                      gp_start
#macro gpLeft                                       gp_padl
#macro gpUp                                         gp_padu
#macro gpRight                                      gp_padr
#macro gpDown                                       gp_padd

#macro ctTypeXbox           0
#macro ctTypePS             1
globalvar KEY;KEY={
    //Initialize input variables inside obj_mouse_collision, using init_input()
    lock_timer          :0,
    hold_lock           :true,
    lock_t              :0,
    lock_tt             :60,
    lock_interval       :5,
    locked              :false,
    clicked             :false,
    released            :false,
    click               :false,
    any                 :false,
    any_pressed         :false,
    macro_avoid         :["_","<",">","{","}","#","$","%","^","&","*","(",")","=","+","-","@"],
}
globalvar GPAD;GPAD={
    type            :ctTypeXbox,
    enabled         :false,
    player1         :0,
    player2         :1,
    player3         :2,
    player4         :3,
    up              :gpUp,
    down            :gpDown,
    left            :gpLeft,
    right           :gpRight,
    a               :gpA,
    b               :gpB,
    y               :gpY,
    x               :gpX,
    select          :gpSelect,
    start           :gpStart,
    rb              :gpRB,
    lb              :gpLB,
    rt              :gpRT,
    lt              :gpLT,
    //check_gamepad:function(){
    //    for(var i=0;i<gamepad_get_device_count();i++)if(gamepad_button_check_pressed(gpStart)){
    //        return i;
    //    }
    //},
}
globalvar KP;KP={
    up      :false,
    down    :false,
    left    :false,
    right   :false,
    action1 :false,
    action2 :false,
    action3 :false,
    cancel  :false,
    confirm :false,
}
globalvar KC;KC={
    up      :false,
    down    :false,
    left    :false,
    right   :false,
    action1 :false,
    action2 :false,
    action3 :false,
    cancel  :false,
    confirm :false,
}
globalvar KR;KR={
    up      :false,
    down    :false,
    left    :false,
    right   :false,
    action1 :false,
    action2 :false,
    action3 :false,
    cancel  :false,
    confirm :false,
}
globalvar GPS1;GPS1={
    lh_val:0,
    rh_val:0,
    lv_val:0,
    rv_val:0,
}
globalvar GP1;GP1={
    up      :false,
    down    :false,
    left    :false,
    right   :false,
    action1 :false,
    action2 :false,
    action3 :false,
    cancel  :false,
    confirm :false,
}
globalvar GC1;GC1={
    up      :false,
    down    :false,
    left    :false,
    right   :false,
    action1 :false,
    action2 :false,
    action3 :false,
    cancel  :false,
    confirm :false,
}
globalvar GR1;GR1={
    up      :false,
    down    :false,
    left    :false,
    right   :false,
    action1 :false,
    action2 :false,
    action3 :false,
    cancel  :false,
    confirm :false,
}
//------------------------------------------------------------------------------------------\\
//Set input here                                                                            ||
//------------------------------------------------------------------------------------------//
enum inp{
    up,
    down,
    left,
    right,
    action1,
    action2,
    action3,
    cancel,
    confirm,
}
globalvar INPUT_NAMES;
INPUT_NAMES[inp.up               ]="Up";
INPUT_NAMES[inp.down             ]="Down";
INPUT_NAMES[inp.left             ]="Left";
INPUT_NAMES[inp.right            ]="Right";
INPUT_NAMES[inp.action1          ]="Dig";
INPUT_NAMES[inp.action2          ]="Interact";
INPUT_NAMES[inp.action3          ]="Sell Plant";
INPUT_NAMES[inp.cancel           ]="Cancel/Back";
INPUT_NAMES[inp.confirm          ]="Confirm";
with(KEY){
    up_def      =vk_w;
    down_def    =vk_s;
    left_def    =vk_a;
    right_def   =vk_d;
    action1_def =vk_e;
    action2_def =vk_q;
    action3_def =vk_f;
    cancel_def  =vk_escape;
    confirm_def =vk_enter;
    inputs=array_create(array_length(INPUT_NAMES),0);
}
with(GPAD){
    up_def1     =gp_padu;
    down_def1   =gp_padd;
    left_def1   =gp_padl;
    right_def1  =gp_padr;
    action1_def1=gpAction1;
    action2_def1=gpAction2;
    action3_def1=gpAction3;
    cancel_def1 =gpCancel;
    confirm_def1=gpConfirm;
    inputs1     =array_create(array_length(INPUT_NAMES),0);
}
function ReadKeyBindings(){
    if file_exists("controls.ini") {
        ini_open("controls.ini");
        with(KEY){
            inputs[inp.up             ]=ini_read_real("Keyboard",INPUT_NAMES[inp.up             ],up_def);
            inputs[inp.down           ]=ini_read_real("Keyboard",INPUT_NAMES[inp.down           ],down_def);
            inputs[inp.left           ]=ini_read_real("Keyboard",INPUT_NAMES[inp.left           ],left_def);
            inputs[inp.right          ]=ini_read_real("Keyboard",INPUT_NAMES[inp.right          ],right_def);
            inputs[inp.action1        ]=ini_read_real("Keyboard",INPUT_NAMES[inp.action1        ],action1_def);
            inputs[inp.action2        ]=ini_read_real("Keyboard",INPUT_NAMES[inp.action2        ],action2_def);
            inputs[inp.action3        ]=ini_read_real("Keyboard",INPUT_NAMES[inp.action3        ],action3_def);
            inputs[inp.cancel         ]=ini_read_real("Keyboard",INPUT_NAMES[inp.cancel         ],cancel_def);
            inputs[inp.confirm        ]=ini_read_real("Keyboard",INPUT_NAMES[inp.confirm        ],confirm_def);
        }
        with(GPAD){
            inputs1[inp.up             ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.up             ],up_def1);
            inputs1[inp.down           ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.down           ],down_def1);
            inputs1[inp.left           ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.left           ],left_def1);
            inputs1[inp.right          ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.right          ],right_def1);
            inputs1[inp.action1        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.action1        ],action1_def1);
            inputs1[inp.action2        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.action2        ],action2_def1);
            inputs1[inp.action3        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.action3        ],action3_def1);
            inputs1[inp.cancel         ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.cancel         ],cancel_def1);
            inputs1[inp.confirm        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.confirm        ],confirm_def1);
        }
        ini_close();
        Trace("controls.ini found.");
    }else{
        Trace("controls.ini doesn't exist.");
        with(KEY){
            inputs[inp.up             ]=up_def;
            inputs[inp.down           ]=down_def;
            inputs[inp.left           ]=left_def;
            inputs[inp.right          ]=right_def;
            inputs[inp.action1        ]=action1_def;
            inputs[inp.action2        ]=action2_def;
            inputs[inp.action3        ]=action3_def;
            inputs[inp.cancel         ]=cancel_def;
            inputs[inp.confirm        ]=confirm_def;
        }
        //with(GPAD){
        //    inputs1[inp.up             ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.up             ],up_def1);
        //    inputs1[inp.down           ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.down           ],down_def1);
        //    inputs1[inp.left           ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.left           ],left_def1);
        //    inputs1[inp.right          ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.right          ],right_def1);
        //    inputs1[inp.action1        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.action1        ],action1_def1);
        //    inputs1[inp.action2        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.action2        ],action2_def1);
        //    inputs1[inp.action3        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.action3        ],action3_def1);
        //    inputs1[inp.cancel         ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.cancel         ],cancel_def1);
        //    inputs1[inp.confirm        ]=ini_read_real("Gamepad1",INPUT_NAMES[inp.confirm        ],confirm_def1);
        //}
        ini_open("controls.ini");
        for(var i=0;i<array_length(INPUT_NAMES);i++) {
            ini_write_real("Keyboard",INPUT_NAMES[i],KEY.inputs[i]);
            //ini_write_real("Gamepad1",INPUT_NAMES[i],GPAD.inputs1[i]);
        }
        ini_close();
    }
}
ReadKeyBindings();
var _inputVariables=[
"up",
"down",
"left",
"right",
"action1",
"action2",
"action3",
"cancel",
"cancel_alt",
"confirm",
"confirm_alt"];
for(var i=0;i<array_length(_inputVariables);i++){
    VSSet(KEY,_inputVariables[i],false);
    VSSet(KP,_inputVariables[i],false);
    VSSet(KC,_inputVariables[i],false);
    VSSet(KR,_inputVariables[i],false);
    VSSet(GPAD,_inputVariables[i],false);
    VSSet(KP,_inputVariables[i],false);
    VSSet(KC,_inputVariables[i],false);
    VSSet(KR,_inputVariables[i],false);
}
function KeyCheck(){
    with(KP){
        up      =keyboard_check_pressed(KEY.inputs[inp.up]);
        down    =keyboard_check_pressed(KEY.inputs[inp.down]);
        left    =keyboard_check_pressed(KEY.inputs[inp.left]);
        right   =keyboard_check_pressed(KEY.inputs[inp.right]);
        action1 =keyboard_check_pressed(KEY.inputs[inp.action1]);
        action2 =keyboard_check_pressed(KEY.inputs[inp.action2]);
        action3 =keyboard_check_pressed(KEY.inputs[inp.action3]);
        confirm =keyboard_check_pressed(KEY.inputs[inp.confirm]);
        cancel  =keyboard_check_pressed(KEY.inputs[inp.cancel]);
    }
    with(KC){
        up      =keyboard_check(KEY.inputs[inp.up]);
        down    =keyboard_check(KEY.inputs[inp.down]);
        left    =keyboard_check(KEY.inputs[inp.left]);
        right   =keyboard_check(KEY.inputs[inp.right]);
        action1 =keyboard_check(KEY.inputs[inp.action1]);
        action2 =keyboard_check(KEY.inputs[inp.action2]);
        action3 =keyboard_check(KEY.inputs[inp.action3]);
        confirm =keyboard_check(KEY.inputs[inp.confirm]);
        cancel  =keyboard_check(KEY.inputs[inp.cancel]);
    }
    with(KR){
        up      =keyboard_check_released(KEY.inputs[inp.up]);
        down    =keyboard_check_released(KEY.inputs[inp.down]);
        left    =keyboard_check_released(KEY.inputs[inp.left]);
        right   =keyboard_check_released(KEY.inputs[inp.right]);
        action1 =keyboard_check_released(KEY.inputs[inp.action1]);
        action2 =keyboard_check_released(KEY.inputs[inp.action2]);
        action3 =keyboard_check_released(KEY.inputs[inp.action3]);
        confirm =keyboard_check_released(KEY.inputs[inp.confirm]);
        cancel  =keyboard_check_released(KEY.inputs[inp.cancel]);
    }
    if(GPAD.enabled){
        with(GPS1){
            lh_val=gamepad_axis_value(GPAD.player1,gp_axislh);
            rh_val=gamepad_axis_value(GPAD.player1,gp_axisrh);

            lv_val=gamepad_axis_value(GPAD.player1,gp_axislv);
            rv_val=gamepad_axis_value(GPAD.player1,gp_axisrv);
        }
        with(GP1){
            up      =gamepad_button_pressed(GPAD.player1,GPAD.up);
            down    =gamepad_button_pressed(GPAD.player1,GPAD.down);
            left    =gamepad_button_pressed(GPAD.player1,GPAD.left);
            right   =gamepad_button_pressed(GPAD.player1,GPAD.right);
            a       =gamepad_button_pressed(GPAD.player1,GPAD.a);
            b       =gamepad_button_pressed(GPAD.player1,GPAD.b);
            y       =gamepad_button_pressed(GPAD.player1,GPAD.y);
            x       =gamepad_button_pressed(GPAD.player1,GPAD.x);
            select  =gamepad_button_pressed(GPAD.player1,GPAD.select);
            start   =gamepad_button_pressed(GPAD.player1,GPAD.start);
            rb      =gamepad_button_pressed(GPAD.player1,GPAD.rb);
            lb      =gamepad_button_pressed(GPAD.player1,GPAD.lb);
            rt      =gamepad_button_pressed(GPAD.player1,GPAD.rt);
            lt      =gamepad_button_pressed(GPAD.player1,GPAD.lt);
        }
        with(GC1){
            up      =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.up]);
            down    =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.down]);
            left    =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.left]);
            right   =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.right]);
            action1 =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.action1]);
            action2 =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.action2]);
            action3 =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.action3]);
            confirm =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.confirm]);
            cancel  =gamepad_button_check(GPAD.player1,GPAD.inputs1[inp.cancel]);
        }
        with(GR1){
            up      =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.up]);
            down    =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.down]);
            left    =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.left]);
            right   =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.right]);
            action1 =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.action1]);
            action2 =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.action2]);
            action3 =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.action3]);
            confirm =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.confirm]);
            cancel  =gamepad_button_check_released(GPAD.player1,GPAD.inputs1[inp.cancel]);
        }
    }else{
        //GPAD.player1=GPAD.check_gamepad();
    }
}
//------------------------------------------------------------------------------------------\\
//Don't touch the rest                                                                      ||
//------------------------------------------------------------------------------------------//
function ChrName(_key){
    if(IsString(_key))return _key;
    if clamp(_key,vk_0,vk_z)==_key{
        return chr(_key);
    }else{
        switch(_key){
            case vk_left:           return "Left";
            case vk_right:          return "Right";
            case vk_up:             return "Up";
            case vk_down:           return "Down";
            case vk_enter:          return "Enter";
            case vk_escape:         return "Escape";
            case vk_space:          return "Space";
            case vk_shift:          return "Shift";
            case vk_control:        return "Control";
            case vk_alt:            return "Alt";
            case vk_backspace:      return "Backspace";
            case vk_tab:            return "Tab";
            case vk_home:           return "Home";
            case vk_end:            return "End";
            case vk_delete:         return "Delete";
            case vk_insert:         return "Insert";
            case vk_pageup:         return "PageUp";
            case vk_pagedown:       return "PageDown";
            case vk_pause:          return "Pause";
            case vk_printscreen:    return "Printscreen";
            case vk_f1:             return "F1";
            case vk_f2:             return "F2";
            case vk_f3:             return "F3";
            case vk_f4:             return "F4";
            case vk_f5:             return "F5";
            case vk_f6:             return "F6";
            case vk_f7:             return "F7";
            case vk_f8:             return "F8";
            case vk_f9:             return "F9";
            case vk_f10:            return "F10";
            case vk_f11:            return "F11";
            case vk_f12:            return "F12";
            case vk_numpad0:        return "0";
            case vk_numpad1:        return "1";
            case vk_numpad2:        return "2";
            case vk_numpad3:        return "3";
            case vk_numpad4:        return "4";
            case vk_numpad5:        return "5";
            case vk_numpad6:        return "6";
            case vk_numpad7:        return "7";
            case vk_numpad8:        return "8";
            case vk_numpad9:        return "9";
            case vk_multiply:       return "Multiply";
            case vk_divide:         return "Divide";
            case vk_add:            return "Add";
            case vk_subtract:       return "Subtract";
            case vk_decimal:        return "Decimal";
        }
    }
}
Trace("Initialized Input");
function IK(_key){
    //Use Input objects input variables
    //Used to insert keys when typing text with scribble
    _key=VIGet(Input.id,_key);
    return ChrName(_key);
}
